webpackJsonp([27],{BSNv:function(t,e){},vdVF:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("mvHQ"),i=a.n(s),o=a("bzuE"),n=(a("YaEn"),a("kiDv")),r=a("vLgD");var c=a("Eaqu"),l=a("PUIo"),u={components:{vueQr:a.n(l).a},data:function(){return{wechat_public_avatar:"",title:"",systemName:"",leftBg:a("7Pfe"),user_verify:"",code:"",time:"",register:1,loading:!1,username:"",password:"",xianshi:!0,texturl:"",timeout:"",token:"",uuid:""}},created:function(){if(this.getconfig,this.token=this.$route.query.token,this.token){var t={token:this.token};localStorage.setItem("data_token",i()(t));var e=this;this.$message.success("请稍等....."),setTimeout(function(){e.$router.push("/dashboard/console")},1500)}this.$route.query.msg&&this.$route.query.msg+""=="1"&&this.$message.success("注册成功，请登录！")},mounted:function(){this.getQrcode(),this.Aptconfig(),this.getconfig(),this.read()},methods:{Aptconfig:function(){var t=this;Object(c.M)().then(function(e){t.wechat_public_avatar=e.data.logo,t.title=e.data.name,localStorage.setItem("config",i()(e.data))})},getconfig:function(){var t=JSON.parse(localStorage.getItem("config"));this.title=t.name,this.register=t.register,this.wechat_public_avatar=t.logo,n.a.systemName=t.name},getQrcode:function(){var t=this;Object(c.l)().then(function(e){t.texturl=i()({uuid:e.data,url:o.b}),t.uuid=e.data,localStorage.setItem("uuid",t.uuid)})},fanhui:function(){this.xianshi=!0,clearInterval(this.timeout)},saoma123:function(){var t=this;this.timeout=setInterval(function(){Object(c.G)({uuid:localStorage.getItem("uuid")}).then(function(e){if(1==e.code){var a=i()(e.data);localStorage.setItem("data_token",a),t.$router.push("/dashboard/console"),clearInterval(t.timeout)}})},3e3),t.xianshi=!1},login:function(){var t,e=this,a=this.username,s=this.password;return""==a||null==a?(this.$message.error("用户名不正确"),!1):""==s||null==s?(this.$message.error("密码不正确"),!1):void(t={username:a,password:s},r.a.post({url:"/user/login",data:t}).then(function(t){return t})).then(function(t){if(t.code){var a=i()(t.data);localStorage.setItem("data_token",a),e.$router.push("/dashboard/console")}})},read:function(){-1==location.href.indexOf("#reloaded")&&(location.href=location.href+"#reloaded",location.reload())},initLanguage:function(){},zhuce:function(){this.$router.push({path:"/register"})},forget:function(){this.$router.push("/forget")}}},d={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"login"},[s("div",{staticClass:"left-wrap",style:{backgroundImage:"url("+t.leftBg+")"}},[s("div",{staticClass:"logo"},[s("img",{attrs:{src:t.wechat_public_avatar}}),t._v(" "),s("h1",{staticClass:"title"},[t._v(t._s(t.title))])]),t._v(" "),s("img",{staticClass:"left-img",attrs:{src:a("PPYT")}})]),t._v(" "),s("div",{staticClass:"right-wrap"},[s("div",{staticClass:"header"},[s("img",{attrs:{src:t.wechat_public_avatar}}),t._v(" "),s("h1",{staticClass:"title"},[t._v(t._s(t.title))])]),t._v(" "),s("div",{staticClass:"login-wrap"},[s("div",{directives:[{name:"show",rawName:"v-show",value:1==t.xianshi,expression:"xianshi == true"}],staticClass:"qrcode-1",on:{click:t.saoma123}},[s("div",{staticClass:"sanjiao"})]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:0==t.xianshi,expression:"xianshi == false"}],staticClass:"form"},[s("h3",[t._v("扫码登录")]),t._v(" "),s("div",{staticClass:"qrcode_scan"},[s("vue-qr",{staticClass:"bicode",staticStyle:{width:"200px",height:"200px"},attrs:{logoScale:20,text:t.texturl,margin:0,dotScale:1}})],1),t._v(" "),s("el-button",{staticClass:"qrcode_button",attrs:{type:"primary",size:"medium"},on:{click:t.fanhui}},[t._v("返回账号登录")])],1),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:1==t.xianshi,expression:"xianshi == true"}],staticClass:"form"},[s("h3",[t._v(t._s(t.$t("login.title")))]),t._v(" "),s("el-col",{staticStyle:{"margin-top":"0px"}},[s("span",{staticClass:"input-label"},[t._v("用户名")]),t._v(" "),s("el-input",{attrs:{size:"medium",placeholder:"请输入您的用户名"},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}})],1),t._v(" "),s("el-col",{staticStyle:{"margin-top":"15px"}},[s("span",{staticClass:"input-label"},[t._v("密码")]),t._v(" "),s("el-input",{attrs:{placeholder:"请输入您的密码",size:"medium",type:"password",autocomplete:"off"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.login(e)}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),t._v(" "),s("el-col",{staticStyle:{"margin-top":"30px"}},[s("el-button",{staticClass:"login-btn",on:{click:t.login}},[t._v("登录")]),t._v(" "),s("div",{staticClass:"zuce"},[1==t.register||"1"==t.register?s("div",{staticClass:"zuce_1",on:{click:function(e){return t.zhuce()}}},[t._v("注册用户")]):t._e(),t._v(" "),s("div",{staticClass:"zuce_1",on:{click:function(e){return t.forget()}}},[t._v("忘记密码？")])])],1)],1)])])])},staticRenderFns:[]};var v=a("VU/8")(u,d,!1,function(t){a("BSNv")},"data-v-461fb322",null);e.default=v.exports}});